@model List<Realestate_portal.Models.Tb_Resources>
@{
    ViewBag.Title = "Resources";
    List<Realestate_portal.Models.Tb_Resources> resourcesBroker = (List<Realestate_portal.Models.Tb_Resources>)ViewBag.resourcesbroker;
    List<Realestate_portal.Models.Tb_Options> lstcategories = (List<Realestate_portal.Models.Tb_Options>)ViewBag.categories;
    List<Realestate_portal.Models.Tb_Resources> teamDoc = (List<Realestate_portal.Models.Tb_Resources>)ViewBag.teamdocuments;
}

<div class="grid grid-cols-12 gap-6 mt-8">
    <div class="col-span-12 lg:col-span-3 2xl:col-span-2">
        <h2 class="intro-y text-lg font-medium mr-auto mt-2">
            Resources
        </h2>
        <!-- BEGIN: File Manager Menu -->
        <div class="intro-y box p-5 mt-6">
            <div class="mt-1">

                <div class="pricing-tabs nav nav-tabs box rounded-full overflow-hidden" role="tablist"> 
                <a id="layout-1-monthly-fees-tab" data-toggle="tab" data-target="#resourcesindividual" href="javascript:;" class="flex-1 w-32 lg:w-40 py-2 lg:py-3 whitespace-nowrap text-center active" role="tab" aria-controls="layout-1-monthly-fees" aria-selected="true"> Resources</a>
                <a id="layout-1-annual-fees-tab" data-toggle="tab" data-target="#resourcesteam" href="javascript:;" class="flex-1 w-32 lg:w-40 py-2 lg:py-3 whitespace-nowrap text-center" role="tab" aria-controls="layout-1-annual-fees" aria-selected="false"> Team Resources</a>
                </div>

            </div>
            <div class="border-t border-gray-200 dark:border-dark-5 mt-4 pt-4">
                <a href="javascript:void(0)" class="flex items-center px-3 py-2 rounded-md filtertype">
                    <div class="w-2 h-2 bg-theme-25 rounded-full mr-3"></div>
                    Documents
                </a>
                <a href="javascript:void(0)" class="flex items-center px-3 py-2 mt-2 rounded-md">
                    <div class="w-2 h-2 bg-theme-20 rounded-full mr-3"></div>
                    Scripts
                </a>
                <a href="javascript:void(0)" class="flex items-center px-3 py-2 mt-2 rounded-md">
                    <div class="w-2 h-2 bg-theme-15 rounded-full mr-3"></div>
                    Email Campaigns
                </a>
                <a href="javascript:void(0)" class="flex items-center px-3 py-2 mt-2 rounded-md">
                    <div class="w-2 h-2 bg-theme-21 rounded-full mr-3"></div>
                    Text Campaigns
                </a>

                @*<a href="" class="flex items-center px-3 py-2 mt-2 rounded-md"> <i class="w-4 h-4 mr-2" data-feather="plus"></i> Add New Category </a>*@
            </div>
        </div>
        <!-- END: File Manager Menu -->
    </div>
    <div class="col-span-12 lg:col-span-9 2xl:col-span-10">
        <!-- BEGIN: File Manager Filter -->
        <div class="intro-y flex flex-col-reverse sm:flex-row items-center">
            @*<select class="tom-select w-full" id="filterbycatDocs" style="width:150px;z-index:9999;margin-right:20px">
                <option>Buying</option>
                <option>Brokerage</option>
                <option>Commercial</option>
                <option>Land</option>
                <option>MLS</option>
                <option>Rental</option>
                <option>Selling</option>
            </select>*@
            <div class="w-full sm:w-auto relative mr-auto mt-3 sm:mt-0">
                <i class="w-4 h-4 absolute my-auto inset-y-0 ml-3 left-0 z-10 text-gray-700 dark:text-gray-300" data-feather="search"></i>
                <input type="text" id="myInputDocs" onkeyup="searchin_li()" class="form-control w-full sm:w-64 box px-10 text-gray-700 dark:text-gray-300 placeholder-theme-13" placeholder="Search files">

            </div>
            <div class="w-full sm:w-auto flex">
                @if (ViewBag.rol == "Admin")
                {
                <a class="btn btn-primary shadow-md mr-2" href="#" data-toggle="modal" data-target="#modalNewvideo">Add Document</a>
                <a class="btn btn-primary shadow-md mr-2" href="#" data-toggle="modal" data-target="#modalNewText">Add Campaign</a>
                <a class="btn btn-secondary shadow-md mr-2" href="@Url.Action("Resources_management", "Portal")">Management</a>


                }

                else if (ViewBag.rol == "SA")
                {
                <a class="btn btn-success shadow-md mr-2" href="#" data-toggle="modal" data-target="#modalNewvideo">Add Document</a>
                <a class="btn btn-success shadow-md mr-2" href="#" data-toggle="modal" data-target="#modalNewText">Add Campaign</a>
                <a class="btn btn-secondary shadow-md mr-2" href="@Url.Action("Resources_management", "Portal")">Management</a>
                <a class="btn btn-primary shadow-md mr-2" href="@Url.Action("Resources_broker", "Portal", new { broker=ViewBag.selbroker})">Resources for brokers</a>
                }
                @if (ViewBag.rol == "Agent" && ViewBag.leader == true)
                {
                <a class="btn btn-success shadow-md mr-2" href="#" data-toggle="modal" data-target="#modalNewvideo">Add team Document</a>
                <a class="btn btn-success shadow-md mr-2" href="#" data-toggle="modal" data-target="#modalNewText">Add team Campaign</a>
                }


            </div>
        </div>
        <!-- END: File Manager Filter -->

    
            <div class="tab-content">
                <div id="resourcesindividual" class="tab-pane flex flex-col lg:flex-row active" role="tabpanel" aria-labelledby="resourcesindividual">
                    <!-- BEGIN: Directory & Files -->

                    @if (Model.Count() > 0)
    {<div class="intro-y grid grid-cols-12 gap-3 sm:gap-6 mt-5">
                    @foreach (var item in Model)
    {
                <div id="id_@item.ID_Resource" class="intro-y col-span-6 sm:col-span-4 md:col-span-3 2xl:col-span-2 sortableDocs">
                    <div class="file box rounded-md px-5 pt-8 pb-5 px-3 sm:px-5 relative zoom-in">
                        <div class="absolute left-0 top-0 mt-3 ml-3">
                            @if (item.Type == "Documents" || item.Type == "Documents Agent")
            {<a href="javascript:void(0)" class="flex items-center px-3 py-2 rounded-md">
                    <div class="w-2 h-2 bg-theme-25 rounded-full mr-3"></div>

                </a>}
else if (item.Type == "Scripts" || item.Type == "Scripts Agent")
{
                <a href="javascript:void(0)" class="flex items-center px-3 py-2 mt-2 rounded-md">
                    <div class="w-2 h-2 bg-theme-20 rounded-full mr-3"></div>

                </a>
}
else if (item.Type == "EMAIL CAMPAIGN" || item.Type == "Email campaign agent")
{
                <a href="javascript:void(0)" class="flex items-center px-3 py-2 mt-2 rounded-md">
                    <div class="w-2 h-2 bg-theme-15 rounded-full mr-3"></div>

                </a>
}
else if (item.Type == "TEXT CAMPAIGN" || item.Type == "Text campaign agent")
{
                <a href="javascript:void(0)" class="flex items-center px-3 py-2 mt-2 rounded-md">
                    <div class="w-2 h-2 bg-theme-21 rounded-full mr-3"></div>

                </a>
}
else
{
                <label>@item.Type</label>
}
                        </div>

                        @if (item.Extension_file == ".pdf")
        {
                <a href="@Url.Action("Showpdf", "Portal", new { id = item.ID_Resource })" class="w-3/5 file__icon file__icon--image mx-auto">
                    <div class="file__icon--image__preview image-fit">
                        <img alt="S7VEN" src="~/Content/dist/images/pdf.png">
                    </div>
                </a>
                <a href="@Url.Action("Showpdf", "Portal", new { id = item.ID_Resource })" class="block font-medium mt-4 text-center truncate textfileDocs">@(item.Name + "" + item.Extension_file)</a>
}
else
{
                <a href="@Url.Action("DownloadDoc", "Portal", new { id = item.ID_Resource })" class="w-3/5 file__icon file__icon--image mx-auto">
                    <div class="file__icon--image__preview image-fit">
                        <img alt="S7VEN" src="~/Content/dist/images/file.png">
                    </div>
                </a>
                <a href="@Url.Action("DownloadDoc", "Portal", new { id = item.ID_Resource })" class="block font-medium mt-4 text-center truncate textfileDocs">@(item.Name + "" + item.Extension_file)</a>
}

                        <div class="text-gray-600 text-xs text-center mt-0.5">@item.Size</div>
                        <div class="text-gray-600 text-xs text-center mt-0.5">@item.Last_update.ToShortDateString()</div>
                        <div class="text-gray-600 text-xs text-center mt-0.5">@item.Doc_type</div>

                    </div>
                </div>

}
                </div>
}
else
{
                <div class="items-center">
                    <img src="~/Content/dist/images/nodata-found.png" />
                </div>
           


}





                    <!-- END: Directory & Files -->
                </div>
                <div id="resourcesteam" class="tab-pane flex flex-col lg:flex-row" role="tabpanel" aria-labelledby="resourcesteam">
                    <!-- BEGIN: Directory & Files -->

                    @if (teamDoc.Count() > 0)
    {
                <div class="intro-y grid grid-cols-12 gap-3 sm:gap-6 mt-5">
                    @foreach (var item in teamDoc)
    {
                <div id="id_@item.ID_Resource" class="intro-y col-span-6 sm:col-span-4 md:col-span-3 2xl:col-span-2 sortableDocs">
                    <div class="file box rounded-md px-5 pt-8 pb-5 px-3 sm:px-5 relative zoom-in">
                        <div class="absolute left-0 top-0 mt-3 ml-3">
                            @if (item.Type == "Documents" || item.Type == "Documents Agent")
            {<a href="javascript:void(0)" class="flex items-center px-3 py-2 rounded-md">
                    <div class="w-2 h-2 bg-theme-25 rounded-full mr-3"></div>

                </a>}
else if (item.Type == "Scripts" || item.Type == "Scripts Agent")
{
                <a href="javascript:void(0)" class="flex items-center px-3 py-2 mt-2 rounded-md">
                    <div class="w-2 h-2 bg-theme-20 rounded-full mr-3"></div>

                </a>
}
else if (item.Type == "EMAIL CAMPAIGN" || item.Type == "Email campaign agent")
{
                <a href="javascript:void(0)" class="flex items-center px-3 py-2 mt-2 rounded-md">
                    <div class="w-2 h-2 bg-theme-15 rounded-full mr-3"></div>

                </a>
}
else if (item.Type == "TEXT CAMPAIGN" || item.Type == "Text campaign agent")
{
                <a href="javascript:void(0)" class="flex items-center px-3 py-2 mt-2 rounded-md">
                    <div class="w-2 h-2 bg-theme-21 rounded-full mr-3"></div>

                </a>
}
else
{
                <label>@item.Type</label>
}
                        </div>

                        @if (item.Extension_file == ".pdf")
        {
                <a href="@Url.Action("Showpdf", "Portal", new { id = item.ID_Resource })" class="w-3/5 file__icon file__icon--image mx-auto">
                    <div class="file__icon--image__preview image-fit">
                        <img alt="S7VEN" src="~/Content/dist/images/pdf.png">
                    </div>
                </a>
                <a href="@Url.Action("Showpdf", "Portal", new { id = item.ID_Resource })" class="block font-medium mt-4 text-center truncate">@(item.Name + "" + item.Extension_file)</a>
}
else
{
                <a href="@Url.Action("DownloadDoc", "Portal", new { id = item.ID_Resource })" class="w-3/5 file__icon file__icon--image mx-auto">
                    <div class="file__icon--image__preview image-fit">
                        <img alt="S7VEN" src="~/Content/dist/images/file.png">
                    </div>
                </a>
                <a href="@Url.Action("DownloadDoc", "Portal", new { id = item.ID_Resource })" class="block font-medium mt-4 text-center truncate">@(item.Name + "" + item.Extension_file)</a>
}

                        <div class="text-gray-600 text-xs text-center mt-0.5">@item.Size</div>
                        <div class="text-gray-600 text-xs text-center mt-0.5">@item.Last_update.ToShortDateString()</div>
                        <div class="text-gray-600 text-xs text-center mt-0.5">@item.Doc_type</div>

                    </div>
                </div>

}
                </div>
}
else
{
                <div class="items-center">
                    <img src="~/Content/dist/images/nodata-found.png" />
                </div>

}






                    <!-- END: Directory & Files -->
                    <!-- END: Directory & Files -->
                </div>
            </div>
  


    </div>
</div>

    
               
                    @*<div class="tab-pane fade" id="i-v-tab-7" style="width:100% !important" role="tabpanel" aria-labelledby="i-vert-tab-7">
                        <div class="widget widget-20">
                            <br /><br />
                            <!-- Begin Events -->
                            <div class="col-md-12" style="background-color:white">
                                <ul class="nav nav-tabs" role="tablist">
                                    <li class="nav-item">
                                        <a class="nav-link active" id="i-vert-tab-11" data-toggle="tab" href="#i-v-tab-11" role="tab" aria-controls="i-v-tab-11" aria-selected="true"><i class="la la-file-text" style="font-size: 50px;color:brown"></i>Documents</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" id="i-vert-tab-12" data-toggle="tab" href="#i-v-tab-12" role="tab" aria-controls="i-v-tab-12" aria-selected="false"><i class="la la-weixin" style="font-size: 50px;color:coral"></i>Scripts</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" id="i-vert-tab-13" data-toggle="tab" href="#i-v-tab-13" role="tab" aria-controls="i-v-tab-13" aria-selected="false"><i class="la la-envelope" style="font-size: 50px;color:cornflowerblue"></i>Email Campaigns</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" id="i-vert-tab-14" data-toggle="tab" href="#i-v-tab-14" role="tab" aria-controls="i-v-tab-14" aria-selected="false"><i class="la la-book" style="font-size: 50px;color:forestgreen"></i>Text Campaigns</a>
                                    </li>
                                </ul>
                                <div class="tab-content d-flex align-items-center">
                                    <div class="tab-pane fade show active" style="width:100% !important" id="i-v-tab-11" role="tabpanel" aria-labelledby="i-vert-tab-11">
                                        <div class="widget widget-20">
                                            <!-- Begin Widget Header -->
                                            <div class="widget-header bordered d-flex align-items-center">

                                            </div>

                                            <!-- End Widget Header -->
                                            <div class="widget-body">

                                                <div class="form-group row d-flex align-items-center mt-3 mb-5">
                                                    <label class="form-control-label">By Category</label>
                                                    <select class="selectpicker show-menu-arrow" id="filterbycatDocs" multiple>
                                                        <option>Buying</option>
                                                        <option>Brokerage</option>
                                                        <option>Commercial</option>
                                                        <option>Land</option>
                                                        <option>MLS</option>
                                                        <option>Rental</option>
                                                        <option>Selling</option>
                                                    </select>

                                                    <div class="col-md-6">
                                                        <input type="text" id="myInputDocs2" class="form-control" onkeyup="searchin_li()" placeholder="Type here to search" style="width:100%">
                                                    </div>
                                                </div>

                                                <div class="row mt-5 mr-0 ml-0">
                                                    @if (resourcesBroker.Where(a => a.Type == "Documents Broker").Count() > 0)
                                                    {
                                                        foreach (var item in resourcesBroker.Where(a => a.Type == "Documents Broker"))
                                                        {
                                                            <div id="id_@item.ID_Resource" class="col-xl-3 col-lg-3 col-md-3 col-sm-12 justify-content-center mb-4 sortableDocs" style="display:flex">
                                                                <div class="media w-100">

                                                                    @if (item.Extension_file == ".pdf")
                                                                    {
                                                                        <div class="align-self-center mr-2">
                                                                            <i class="la la-file-pdf-o" style="font-size:45px;color:cadetblue"></i>
                                                                        </div>
                                                                        <div class="media-body align-self-center">
                                                                            <div class="files-title"><a style="color:#000" class="textfileDocs" href="@Url.Action("Showpdf", "Portal", new { id = item.ID_Resource })" target="_blank">@(item.Name + "" + item.Extension_file) </a></div>
                                                                            <div class="files-number">Size: @item.Size <label>|</label> Last update: @item.Last_update.ToShortDateString()</div>
                                                                        </div>
                                                                    }
                                                                    else
                                                                    {
                                                                        <div class="align-self-center mr-2">
                                                                            <i class="la la-file-word-o" style="font-size:45px;color:dodgerblue"></i>
                                                                        </div>
                                                                        <div class="media-body align-self-center">
                                                                            <div class="files-title"><a style="color:#000" class="textfileDocs" href="@Url.Action("DownloadDoc", "Portal", new { id = item.ID_Resource })">@(item.Name + "" + item.Extension_file) </a></div>
                                                                            <div class="files-number">Size: @item.Size <label>|</label> Last update: @item.Last_update.ToShortDateString()</div>
                                                                        </div>

                                                                    }
                                                                    <div class="value-progress text-info">
                                                                        <label class="badge badgeDocstype">@item.Doc_type</label>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        }
                                                    }
                                                    else
                                                    {
                                                        <label>No documents to show</label>
                                                        <br />
                                                        <br />
                                                        <br />
                                                        <br />
                                                        <br /> <br />
                                                        <br />
                                                        <br />
                                                        <br />
                                                        <br />
                                                    }
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="i-v-tab-12" style="width:100% !important" role="tabpanel" aria-labelledby="i-vert-tab-12">
                                        <div class="widget widget-20">
                                            <!-- Begin Widget Header -->
                                            <div class="widget-header bordered d-flex align-items-center">

                                            </div>
                                            <!-- End Widget Header -->
                                            <div class="widget-body">
                                                <div class="form-group row d-flex align-items-center mt-3 mb-5">
                                                    <label class="form-control-label">By Category</label>
                                                    <select class="selectpicker show-menu-arrow" id="filterbycatScripts" multiple>
                                                        <option>Buying</option>
                                                        <option>Brokerage</option>
                                                        <option>Commercial</option>
                                                        <option>Land</option>
                                                        <option>MLS</option>
                                                        <option>Rental</option>
                                                        <option>Selling</option>
                                                    </select>
                                                    <div class="col-md-6">
                                                        <input type="text" id="myInputScripts2" class="form-control" onkeyup="searchin_liScripts()" placeholder="Type here to search" style="width:100%">
                                                    </div>
                                                </div>
                                                <div class="row mt-5 mr-0 ml-0">
                                                    @if (resourcesBroker.Where(a => a.Type == "Scripts Broker").Count() > 0)
                                                    {
                                                        foreach (var item in resourcesBroker.Where(a => a.Type == "Scripts Broker"))
                                                        {
                                                            <div id="idscr_@item.ID_Resource" class="col-xl-3 col-lg-3 col-md-3 col-sm-6 justify-content-center mb-4 sortableScripts" style="display:flex">
                                                                <div class="media w-100">
                                                                    @if (item.Extension_file == ".pdf")
                                                                    {
                                                                        <div class="align-self-center mr-2">
                                                                            <i class="la la-file-pdf-o" style="font-size:45px;color:cadetblue"></i>
                                                                        </div>
                                                                        <div class="media-body align-self-center">


                                                                            <div class="files-title"><a style="color:#000" class="textfileScripts" href="@Url.Action("Showpdf","Portal", new { id=item.ID_Resource})" target="_blank">@(item.Name + "" + item.Extension_file) </a></div>

                                                                            <div class="files-number">Size: @item.Size <label>|</label> Last update: @item.Last_update.ToShortDateString()</div>
                                                                        </div>
                                                                    }
                                                                    else
                                                                    {
                                                                        <div class="align-self-center mr-2">
                                                                            <i class="la la-file-word-o" style="font-size:45px;color:dodgerblue"></i>
                                                                        </div>
                                                                        <div class="media-body align-self-center">
                                                                            <div class="files-title"><a style="color:#000" class="textfileScripts" href="@Url.Action("DownloadDoc","Portal", new { id=item.ID_Resource})">@(item.Name + "" + item.Extension_file) </a></div>
                                                                            <div class="files-number">Size: @item.Size <label>|</label> Last update: @item.Last_update.ToShortDateString()</div>
                                                                        </div>
                                                                    }

                                                                    <div class="value-progress text-info">
                                                                        <label class="badge badgeScriptstype">@item.Doc_type</label>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        }
                                                    }
                                                    else
                                                    {
                                                        <label>No documents to show</label>
                                                        <br />
                                                        <br />
                                                        <br />
                                                        <br />
                                                        <br /> <br />
                                                        <br />
                                                        <br />
                                                        <br />
                                                        <br />
                                                    }
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="i-v-tab-13" style="width:100% !important" role="tabpanel" aria-labelledby="i-vert-tab-13">
                                        <div class="widget widget-20">
                                            <!-- Begin Widget Header -->
                                            <div class="widget-header bordered d-flex align-items-center">

                                            </div>
                                            <!-- End Widget Header -->
                                            <div class="widget-body">
                                                <div class="form-group row d-flex align-items-center mt-3 mb-5">

                                                </div>
                                                <div class="row mt-5 mr-0 ml-0">
                                                    @if (resourcesBroker.Where(a => a.Type == "Email Campaign Broker").Count() > 0)
                                                    {
                                                        foreach (var item in resourcesBroker.Where(a => a.Type == "Email Campaign Broker"))
                                                        {
                                                            <div id="idscr_@item.ID_Resource" class="col-xl-3 col-lg-3 col-md-3 col-sm-6 justify-content-center mb-4 sortableScripts" style="display:flex">
                                                                <div class="media w-100">

                                                                    <div class="align-self-center mr-2">
                                                                        <i class="la la-envelope-o" style="font-size:45px;color:cadetblue"></i>
                                                                    </div>
                                                                    <div class="media-body align-self-center">


                                                                        <div class="files-title"><a style="color:#000" class="textfileScripts" href="@Url.Action("ShowCampaign","Portal", new { id=item.ID_Resource})" target="_blank">@(item.Name + "" + item.Extension_file) </a></div>

                                                                        <div class="files-number">Last update: @item.Last_update.ToShortDateString()</div>
                                                                    </div>



                                                                </div>
                                                            </div>

                                                        }
                                                    }
                                                    else
                                                    {
                                                        <label>No campaigns to show</label>
                                                        <br />
                                                        <br />
                                                        <br />
                                                        <br />
                                                        <br /> <br />
                                                        <br />
                                                        <br />
                                                        <br />
                                                        <br />
                                                    }
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="tab-pane fade" id="i-v-tab-14" style="width:100% !important" role="tabpanel" aria-labelledby="i-vert-tab-14">
                                        <div class="widget widget-20">
                                            <!-- Begin Widget Header -->
                                            <div class="widget-header bordered d-flex align-items-center">

                                            </div>
                                            <!-- End Widget Header -->
                                            <div class="widget-body">
                                                <div class="form-group row d-flex align-items-center mt-3 mb-5">

                                                </div>
                                                <div class="row mt-5 mr-0 ml-0">
                                                    @if (resourcesBroker.Where(a => a.Type == "Text Campaign Broker").Count() > 0)
                                                    {
                                                        foreach (var item in resourcesBroker.Where(a => a.Type == "Text Campaign Broker"))
                                                        {
                                                            <div id="idscr_@item.ID_Resource" class="col-xl-3 col-lg-3 col-md-3 col-sm-6 justify-content-center mb-4 sortableScripts" style="display:flex">
                                                                <div class="media w-100">
                                                                    <div class="align-self-center mr-2">
                                                                        <i class="la la-book" style="font-size:45px;color:cadetblue"></i>
                                                                    </div>
                                                                    <div class="media-body align-self-center">


                                                                        <div class="files-title"><a style="color:#000" class="textfileScripts" href="@Url.Action("ShowCampaign","Portal", new { id=item.ID_Resource})" target="_blank">@(item.Name + "" + item.Extension_file) </a></div>

                                                                        <div class="files-number"> Last update: @item.Last_update.ToShortDateString()</div>
                                                                    </div>



                                                                </div>
                                                            </div>

                                                        }
                                                    }
                                                    else
                                                    {
                                                        <label>No documents to show</label>
                                                        <br />
                                                        <br />
                                                        <br />
                                                        <br />
                                                        <br /> <br />
                                                        <br />
                                                        <br />
                                                        <br />
                                                        <br />
                                                    }
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>*@


<div id="modalNewvideo" class="modal fade">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Add Document</h4>
              
            </div>
            <form id="htmlform" method="post">
                <div class="modal-body">
                    <div class="row">
                        <div class="col-6">
                            <div class="form-group">
                                <label>Title *</label>
                                <input type="text" class="form-control" id="titlevideo" required />
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="form-group">
                                <label>Type *</label>
                                <select id="typevideo" class="form-control" required>
                                    @if (ViewBag.rol == "SA")
                                    {
                                        <option value="Documents Agent">DOCUMENT</option>
                                        <option value="Scripts Agent">SCRIPT</option>
                                    }
                                    else
                                    {
                                        <option value="Documents">DOCUMENT</option>
                                        <option value="Scripts">SCRIPT</option>
                                    }

                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-6">
                            <div class="form-group">
                                <label>Category *</label>
                                <select id="categoryvideo" class="form-control" required>
                                    @foreach (var item in lstcategories)
                                    {
                                        <option value="@item.Description">@item.Description</option>
                                    }
                                </select>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="form-group">
                                <label>Document file</label>
                                <input type="file" id="imageUpload" class="form-control" />
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-shadow" data-dismiss="modal">Close</button>
                    <button type="submit" id="subbtnenviar" class="btn btn-primary">Save</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div id="modalNewText" class="modal fade">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Add Campaign</h4>
           
            </div>
            <form id="htmlform2" method="post">
                <div class="modal-body">
                    <div class="row">
                        <div class="col-6">
                            <div class="form-group">
                                <label>Title *</label>
                                <input type="text" class="form-control" id="titlecampaign" required />
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="form-group">
                                <label>Type *</label>
                                <select id="typecampaign" class="form-control" required>

                                    @if (ViewBag.rol == "SA")
                                    {
                                        <option value="Email campaign agent">EMAIL CAMPAIGN</option>
                                        <option value="Text campaign agent">TEXT CAMPAIGN</option>
                                    }
                                    else
                                    {
                                        <option value="EMAIL CAMPAIGN">EMAIL CAMPAIGN</option>
                                        <option value="TEXT CAMPAIGN">TEXT CAMPAIGN</option>
                                    }
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12">

                            <textarea id="summernote" name="editordata" style="width:100%;border:solid 1px #ccc;margin-top:20px" placeholder="Type here.."></textarea>

                        </div>

                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-shadow" data-dismiss="modal">Close</button>
                    <button type="submit" id="subbtnenviarText" class="btn btn-primary">Save</button>
                </div>
            </form>
        </div>
    </div>
</div>

<script type="text/javascript">
    window.onload = function () {

        $('#summernote').summernote({
            minHeight: 400
        });

        $('#htmlform').on('submit', function (event) {
            $("#subbtnenviar").attr("disabled", true);
            event.preventDefault();

            $("#preloader").show();


            var formData = new FormData();
            var file = document.getElementById("imageUpload").files[0];

            var title = $("#titlevideo").val();
            var category = $("#categoryvideo").val();
            var type = $("#typevideo").val();


            formData.append("imageUploadForm", file);
            formData.append("title", title);
            formData.append("category", category);
            formData.append("type", type);


            $.ajax({
                type: "POST",
                url: '/Portal/UploadDocument',
                data: formData,
                dataType: 'json',
                contentType: false,
                processData: false,
                success: function (response) {
                    if (response == "SUCCESS") {
                        $("#preloader").hide();
                        $("#subbtnenviar").attr("disabled", false);

                        new Noty({
                            type: 'success',
                            layout: 'topRight',
                            text: 'Document uploaded successfully',
                            progressBar: true,
                            timeout: 2500
                        }).show()
                        setTimeout(function () {
                            window.location.reload(true);
                        }, 2000);

                    } else {
                        $("#preloader").hide();
                        $("#subbtnenviar").attr("disabled", false);
                        alert(response);
                    }
                },
                error: function (error) {
                    $("#preloader").hide();
                    $("#subbtnenviar").attr("disabled", false);
                    alert("Error uploading video");
                }
            });
        });

        $('#htmlform2').on('submit', function (event) {
            $("#subbtnenviarText").attr("disabled", true);
            event.preventDefault();


            var myHtml = $('#summernote').summernote('code');
            var formData = new FormData();
            var title = $("#titlecampaign").val();
            var type = $("#typecampaign").val();


            formData.append("title", title);
            formData.append("type", type);
            formData.append("htmlformat", myHtml);



            $("#preloader").show();

            $.ajax({
                type: "POST",
                url: '/Portal/UploadCampaign',
                data: formData,
                dataType: 'json',
                contentType: false,
                processData: false,
                success: function (response) {
                    if (response == "SUCCESS") {
                        $("#preloader").hide();
                        $("#subbtnenviarText").attr("disabled", false);

                        new Noty({
                            type: 'success',
                            layout: 'topRight',
                            text: 'Campaign uploaded successfully',
                            progressBar: true,
                            timeout: 2500
                        }).show()
                        setTimeout(function () {
                            window.location.reload(true);
                        }, 2000);

                    } else {
                        $("#preloader").hide();
                        $("#subbtnenviarText").attr("disabled", false);
                        alert(response);
                    }
                },
                error: function (error) {
                    $("#preloader").hide();
                    $("#subbtnenviarText").attr("disabled", false);
                    alert("Error uploading Campaign");
                }
            });
        });

        $(function () {
            $('#filterbycatDocs').change(function (e) {
                var selected = $(e.target).val();
                if (selected == "") {

                } else {
                    $("#myInputDocs").val('');
                }



                filterbycategory(selected);
            });
        });

        $(function () {
            $('#filterbycatScripts').change(function (e) {
                var selected = $(e.target).val();
                if (selected == "") {

                } else {
                    $("#myInputScripts").val('');
                }



                filterbycategoryScript(selected);
            });
        });



    }



    function searchin_li() {
        // Declare variables

        var input, filter, ul, li, a, i, txtValue;
        input = document.getElementById('myInputDocs');
        filter = input.value.toUpperCase();

        li = document.getElementsByClassName('sortableDocs');

        // Loop through all list items, and hide those who don't match the search query
        for (i = 0; i < li.length; i++) {
            a = li[i].getElementsByClassName('textfileDocs');
            txtValue = a[0].text;

            if (filter == "") {
                $(li[i].closest("div.sortableDocs")).css('display', '');
            } else {

                if (txtValue.toUpperCase().indexOf(filter) > -1) {
                    var iddiv = "#" + $(li[i].closest("div.sortableDocs")).attr("id");

                    $(iddiv).css('display', '');
                } else {
                    var iddiv = "#" + $(li[i].closest("div.sortableDocs")).attr("id");

                    $(iddiv).css('display', 'none');
                }
            }


        }




    }


    function filterbycategory(values) {

        // Declare variables
        var input, filter, ul, li, a, i, txtValue;
        input = document.getElementById('myInputDocs');
        filter = values;


        li = document.getElementsByClassName('badgeDocstype');

        // Loop through all list items, and hide those who don't match the search query
        for (i = 0; i < li.length; i++) {
            a = li[i];
            txtValue = a.innerHTML;

            if (filter == "") {
                $(li[i].closest("div.sortableDocs")).css('display', 'flex');
            } else {

                if (filter.indexOf(txtValue) > -1) {
                    var iddiv = "#" + $(li[i].closest("div.sortableDocs")).attr("id");

                    $(iddiv).css('display', 'flex');
                } else {
                    var iddiv = "#" + $(li[i].closest("div.sortableDocs")).attr("id");

                    $(iddiv).css('display', 'none');
                }
            }


        }
    }

    function filterbycategoryScript(values) {

        // Declare variables
        var input, filter, ul, li, a, i, txtValue;
        input = document.getElementById('myInputScripts');
        filter = values;


        li = document.getElementsByClassName('badgeScriptstype');

        // Loop through all list items, and hide those who don't match the search query
        for (i = 0; i < li.length; i++) {
            a = li[i];
            txtValue = a.innerHTML;

            if (filter == "") {
                $(li[i].closest("div.sortableScripts")).css('display', 'flex');
            } else {

                if (filter.indexOf(txtValue) > -1) {
                    var iddiv = "#" + $(li[i].closest("div.sortableScripts")).attr("id");

                    $(iddiv).css('display', 'flex');
                } else {
                    var iddiv = "#" + $(li[i].closest("div.sortableScripts")).attr("id");

                    $(iddiv).css('display', 'none');
                }
            }


        }
    }

    function searchin_liScripts() {
        // Declare variables

        if ($('#filterbycatScripts').val() != "") {
            $('#filterbycatScripts').val(-1).trigger("change");
        }



        var input, filter, ul, li, a, i, txtValue;
        input = document.getElementById('myInputScripts');
        filter = input.value.toUpperCase();

        li = document.getElementsByClassName('sortableScripts');

        // Loop through all list items, and hide those who don't match the search query
        for (i = 0; i < li.length; i++) {
            a = li[i].getElementsByClassName('textfileScripts');
            txtValue = a[0].text;

            if (filter == "") {
                $(li[i].closest("div.sortableScripts")).css('display', 'flex');
            } else {

                if (txtValue.toUpperCase().indexOf(filter) > -1) {
                    var iddiv = "#" + $(li[i].closest("div.sortableScripts")).attr("id");

                    $(iddiv).css('display', 'flex');
                } else {
                    var iddiv = "#" + $(li[i].closest("div.sortableScripts")).attr("id");

                    $(iddiv).css('display', 'none');
                }
            }


        }




    }


</script>